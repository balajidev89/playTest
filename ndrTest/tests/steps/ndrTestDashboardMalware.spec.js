import {expect, test} from '@playwright/test'

test ('Validate dashboard malware menu buttons', async ({page}) => {
    await page.goto("https://10.31.7.138/", {waitUntil:'networkidle'});
    await page.locator("a[role='button'] span").click();
    await page.locator("body > div:nth-child(1) > div:nth-child(1) > div:nth-child(4) > div:nth-child(1) > ul:nth-child(1) > li:nth-child(1) > ul:nth-child(2) > li:nth-child(2) > a:nth-child(1) > span:nth-child(2)").click();
    await page.waitForLoadState('networkidle');
    // await page.waitForTimeout(3000);
    await expect(page.locator("div[class='page-title-heading'] div:nth-child(2)")).toContainText("Malware Dashboard");
    await expect(page.locator(".card-title")).toContainText("Top Malwares");
    await expect(page.locator("div[class='col-lg-7 pl-0'] div[class='card-header-title font-size-lg text-capitalize font-weight-normal']")).toContainText("Countries"); // validating whether countries are present;
    await page.locator("span[id='malcountry-download'] i[title='Download']").click();   // click on the download button of the countries;
    await page.locator("div[id='ts_top_geo__threat-summary'] i[title='About']").click(); // click on the question mark location wise traffic question mark;
    await page.locator("div[id='ts_top_geo__threat-summary'] i[title='About']").click(); // unclick on the location wise traffic mark;
    await expect(page.locator("body > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > div:nth-child(2) > div:nth-child(3) > div:nth-child(2) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1)")).toContainText("Organizations");
    // await page.waitForLoadState('networkidle');
    page.locator("rect[aria-label='1. CISAI, 0.45576613907569685.']").hover;
    await expect(page.locator("body > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > div:nth-child(2) > div:nth-child(4) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1)")).toContainText("Malware Affected");
    await expect(page.locator("div[class='col-lg-6 pl-0 pr-0'] div[class='card-header-title font-size-lg text-capitalize font-weight-normal']")).toContainText("Malware Timeline");
    await expect(page.locator("	div[class='row main-card mb-3 card'] div[class='card-header-title font-size-lg text-capitalize font-weight-normal']")).toContainText("Hosts");
    await page.locator(".icon-gradient.bg-ripe-malin").click()
    await page.locator("#timeRange").click()
    await page.locator("li[data-range-key='Last 30 Days']").click()
    await page.locator("#select2-selectCustomer-container").click()
    await page.locator("#select2-selectRouter-container").click()
    await page.locator("#select2-selectUnit-container").click()
    await page.locator("#select2-selectUnit-container").click()
    await page.locator("#select2-selectFlow-container").click()
    await page.locator("#select2-selectFlow-container").click()
    await page.locator("button[class='btn btn-shadow btn-outline-danger-white']").getByText('Submit').click("{force:true}");
    await page.locator("div[id='organizations_help'] i[title='More Options']").click(); // click on the download button of the organizations;
    await page.locator("div[id='ts_top_org__threat-summary'] i[title='About']").click(); // click on the question mark of the organizations about;
    await page.locator("div[id='ts_top_org__threat-summary'] i[title='About']").click(); // unclick on the question mark of the organizations about;
    await page.locator("div[id='malware_affected_help'] i[title='More Options']").click(); // click on the malware affected download;
    await page.locator("div[id='malware_affected_help'] i[title='More Options']").click(); // unclick on the malware affected download;
    await page.locator(".icon.text-primary.icon-anim-pulse.lnr-cloud-sync").click();
    // await page.waitForEvent('popup');
    await page.locator("img[src='/assets/images/data-synchronization.png']").click();
    // await page.waitForEvent('popup');
    await page.locator("div[class='app-container app-theme-white body-tabs-shadow fixed-header fixed-sidebar closed-sidebar'] div[class='modal-footer'] button:nth-child(1)").click();
    // await page.waitForLoadState('networkidle');
})

